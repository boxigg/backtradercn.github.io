<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Analyzers Reference &#8212; backtrader 1.9.69.122 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxcontrib-images\LightBox2\lightbox2\css\lightbox.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/mycss-2016-12-25-2300.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/sphinxcontrib-images\LightBox2\lightbox2\js\jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/sphinxcontrib-images\LightBox2\lightbox2\js\lightbox.min.js"></script>
    <script type="text/javascript" src="_static/sphinxcontrib-images\LightBox2\lightbox2-customize\jquery-noconflict.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/myjs-2016-12-25-2300.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Observers Reference" href="observers-reference.html" />
    <link rel="prev" title="Strategies Reference" href="strategy-reference.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

 <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <!-- <a class="navbar-brand" href="index.html"> -->
        <a class="navbar-brand" href="/">
          backtrader</a>
        <a href="index.html">
	  <span class="navbar-text navbar-version pull-left"><b>1.9.69.122</b></span>
	</a>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav navbar-right"> 
            
                <li><a href="/">Home</a></li>
                <li><a href="/features">Features</a></li>
                <li><a href="/docu">Docs</a></li>
                <li><a href="/blog">Blog</a></li>
                <li><a href="https://community.backtrader.com">Community</a></li>
            
            
	      
              
            
            
            
            
            
          </ul>

          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- backtrader-001 -->
      <ins class="adsbygoogle"
	   style="display:block"
	   data-ad-client="ca-pub-2694577446631179"
	   data-ad-slot="3977998265"
	   data-ad-format="auto"></ins>
      <script>
	(adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<div class="globaltoc">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Platform Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="operating.html">Operating the platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cerebro.html">Cerebro</a></li>
<li class="toctree-l1"><a class="reference internal" href="cerebro/cheat-on-open/cheat-on-open.html">Cheat On Open</a></li>
<li class="toctree-l1"><a class="reference internal" href="strategy.html">Strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizers/sizers.html">Sizers - Smart Staking</a></li>
<li class="toctree-l1"><a class="reference internal" href="timers/timers.html">Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="order_target/order_target.html">Target Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="signal_strategy/signal_strategy.html">Strategy with Signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="broker.html">Broker</a></li>
<li class="toctree-l1"><a class="reference internal" href="slippage/slippage.html">Slippage</a></li>
<li class="toctree-l1"><a class="reference internal" href="filler.html">Fillers</a></li>
<li class="toctree-l1"><a class="reference internal" href="order.html">Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="order-creation-execution/order-creation-execution.html">Order Management and Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="order-creation-execution/oco/oco.html">OCO orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="order-creation-execution/trail/stoptrail.html">StopTrail(Limit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="order-creation-execution/bracket/bracket.html">Bracket Orders</a></li>
<li class="toctree-l1"><a class="reference internal" href="order-creation-execution/futurespot/future-vs-spot.html">Futures and Spot Compensation</a></li>
<li class="toctree-l1"><a class="reference internal" href="datafeed.html">Data Feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="datafeed-develop-csv.html">CSV Data Feed Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="datafeed-develop-general/datafeed-develop-general.html">Binary Datafeed Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-a-datafeed.html">Extending a Datafeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="pandas-datafeed/pandas-datafeed.html">Pandas DataFeed Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="tradingcalendar/tradingcalendar.html">Trading Calendar</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-resampling/data-resampling.html">Data Resampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-multitimeframe/data-multitimeframe.html">Data - Multiple Timeframes</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-replay/data-replay.html">Data - Replay</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-rollover/rolling-futures-over.html">Rolling over Futures</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="induse.html">Using Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="talib/talib.html">TA-Lib</a></li>
<li class="toctree-l1"><a class="reference internal" href="mixing-timeframes/indicators-mixing-timeframes.html">Mixing Timeframes in Indicators</a></li>
<li class="toctree-l1"><a class="reference internal" href="inddev.html">Indicator Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="observers-and-statistics/observers-and-statistics.html">Observers and Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="observer-benchmark/benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzers/analyzers.html">Analyzers</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzers/pyfolio.html">PyFolio Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzers/pyfolio-integration/pyfolio-integration.html">Pyfolio Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="writer.html">Writer</a></li>
<li class="toctree-l1"><a class="reference internal" href="commission-schemes/commission-schemes.html">Commissions: Stocks vs Futures</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-commissions/commission-schemes-extended.html">Extending Commissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-defined-commissions/commission-schemes-subclassing.html">User Defined Commissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="commission-credit.html">Commissions: Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="position.html">Position</a></li>
<li class="toctree-l1"><a class="reference internal" href="trade.html">Trade</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting/plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting/ranges/plotting-date-ranges.html">Plotting Date Ranges</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting/sameaxis/plot-sameaxis.html">Plotting on the same axis</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization-improvements.html">Optimization improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="automated-bt-run/automated-bt-run.html">Automating BackTesting</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory-savings/memory-savings.html">Saving Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="timemgmt.html">DateTime Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="live/live.html">Live Data Feeds and Live Trading</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataautoref.html">Data Feeds Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="datayahoo.html">Yahoo Data Feed Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indautoref.html">Indicator Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="talibindautoref.html">TA-Lib Indicator Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="strategy-reference.html">Strategies Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Analyzers Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#annualreturn">AnnualReturn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calmar">Calmar</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drawdown">DrawDown</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timedrawdown">TimeDrawDown</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grossleverage">GrossLeverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#positionsvalue">PositionsValue</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pyfolio">PyFolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logreturnsrolling">LogReturnsRolling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#periodstats">PeriodStats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#returns">Returns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sharperatio">SharpeRatio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sharperatio-a">SharpeRatio_A</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sqn">SQN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timereturn">TimeReturn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tradeanalyzer">TradeAnalyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transactions">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vwr">VWR</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="observers-reference.html">Observers Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizers-reference.html">Sizers Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters-reference.html">Filters Reference</a></li>
</ul>

</div>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="analyzers-reference">
<h1>Analyzers Reference<a class="headerlink" href="#analyzers-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="annualreturn">
<h2>AnnualReturn<a class="headerlink" href="#annualreturn" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.AnnualReturn">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">AnnualReturn</code><a class="headerlink" href="#backtrader.analyzers.AnnualReturn" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates the AnnualReturns by looking at the beginning
and end of the year</p>
<p>Params:</p>
<blockquote>
<div><ul class="simple">
<li>(None)</li>
</ul>
</div></blockquote>
<p>Member Attributes:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">rets</span></code>: list of calculated annual returns</li>
<li><code class="docutils literal notranslate"><span class="pre">ret</span></code>: dictionary (key: year) of annual returns</li>
</ul>
</div></blockquote>
<p><strong>get_analysis</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>Returns a dictionary of annual returns (key: year)</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="calmar">
<h2>Calmar<a class="headerlink" href="#calmar" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.Calmar">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">Calmar</code><a class="headerlink" href="#backtrader.analyzers.Calmar" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates the CalmarRatio
timeframe which can be different from the one used in the underlying data
Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><em>None</em></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Calmar_ratio">https://en.wikipedia.org/wiki/Calmar_ratio</a></li>
</ul>
</div>
<dl class="method">
<dt>
<code class="descname">- ``get_analysis``</code></dt>
<dd><p>Returns a OrderedDict with a key for the time period and the
corresponding rolling Calmar ratio</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">- ``calmar`` the latest calculated calmar ratio</code></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="drawdown">
<h2>DrawDown<a class="headerlink" href="#drawdown" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.DrawDown">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">DrawDown</code><a class="headerlink" href="#backtrader.analyzers.DrawDown" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates trading system drawdowns stats such as drawdown
values in %s and in dollars, max drawdown in %s and in dollars, drawdown
length and drawdown max length</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- ``get_analysis``</code></dt>
<dd><p>Returns a dictionary (with . notation support and subdctionaries) with
drawdown stats as values, the following keys/attributes are available:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">drawdown</span></code> - drawdown value in 0.xx %</li>
<li><code class="docutils literal notranslate"><span class="pre">moneydown</span></code> - drawdown value in monetary units</li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code> - drawdown length</li>
<li><code class="docutils literal notranslate"><span class="pre">max.drawdown</span></code> - max drawdown value in 0.xx %</li>
<li><code class="docutils literal notranslate"><span class="pre">max.moneydown</span></code> - max drawdown value in monetary units</li>
<li><code class="docutils literal notranslate"><span class="pre">max.len</span></code> - max drawdown length</li>
</ul>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="timedrawdown">
<h2>TimeDrawDown<a class="headerlink" href="#timedrawdown" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.TimeDrawDown">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">TimeDrawDown</code><a class="headerlink" href="#backtrader.analyzers.TimeDrawDown" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates trading system drawdowns on the chosen
timeframe which can be different from the one used in the underlying data
Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><em>None</em></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- ``get_analysis``</code></dt>
<dd><p>Returns a dictionary (with . notation support and subdctionaries) with
drawdown stats as values, the following keys/attributes are available:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">drawdown</span></code> - drawdown value in 0.xx %</li>
<li><code class="docutils literal notranslate"><span class="pre">maxdrawdown</span></code> - drawdown value in monetary units</li>
<li><code class="docutils literal notranslate"><span class="pre">maxdrawdownperiod</span></code> - drawdown length</li>
</ul>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">- Those are available during runs as attributes</code></dt>
<dd><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">dd</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">maxdd</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">maxddlen</span></code></li>
</ul>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grossleverage">
<h2>GrossLeverage<a class="headerlink" href="#grossleverage" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.GrossLeverage">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">GrossLeverage</code><a class="headerlink" href="#backtrader.analyzers.GrossLeverage" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates the Gross Leverage of the current strategy
on a timeframe basis</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="positionsvalue">
<h2>PositionsValue<a class="headerlink" href="#positionsvalue" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.PositionsValue">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">PositionsValue</code><a class="headerlink" href="#backtrader.analyzers.PositionsValue" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer reports the value of the positions of the current set of
datas</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first">timeframe (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the timeframe of the 1st data of the system will be
used</p>
</li>
<li><p class="first">compression (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first">headers (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>Add an initial key to the dictionary holding the results with the names
of the datas (‘Datetime’ as key</p>
</li>
<li><p class="first">cash (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>Include the actual cash as an extra position (for the header ‘cash’
will be used as name)</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pyfolio">
<h2>PyFolio<a class="headerlink" href="#pyfolio" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.PyFolio">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">PyFolio</code><a class="headerlink" href="#backtrader.analyzers.PyFolio" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer uses 4 children analyzers to collect data and transforms it
in to a data set compatible with <code class="docutils literal notranslate"><span class="pre">pyfolio</span></code></p>
<p>Children Analyzer</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">TimeReturn</span></code></p>
<p>Used to calculate the returns of the global portfolio value</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">PositionsValue</span></code></p>
<p>Used to calculate the value of the positions per data. It sets the
<code class="docutils literal notranslate"><span class="pre">headers</span></code> and <code class="docutils literal notranslate"><span class="pre">cash</span></code> parameters to <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">Transactions</span></code></p>
<p>Used to record each transaction on a data (size, price, value). Sets
the <code class="docutils literal notranslate"><span class="pre">headers</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">GrossLeverage</span></code></p>
<p>Keeps track of the gross leverage (how much the strategy is invested)</p>
</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Params:</dt>
<dd><p class="first">These are passed transparently to the children</p>
<ul class="last">
<li><p class="first">timeframe (default: <code class="docutils literal notranslate"><span class="pre">bt.TimeFrame.Days</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the timeframe of the 1st data of the system will be
used</p>
</li>
<li><p class="first">compression (default: <cite>1`</cite>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
</ul>
</dd>
</dl>
<p>Both <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> and <code class="docutils literal notranslate"><span class="pre">compression</span></code> are set following the default
behavior of <code class="docutils literal notranslate"><span class="pre">pyfolio</span></code> which is working with <em>daily</em> data and upsample it
to obtaine values like yearly returns.</p>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

<dl class="method">
<dt id="backtrader.analyzers.PyFolio.get_pf_items">
<code class="descname">get_pf_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#backtrader.analyzers.PyFolio.get_pf_items" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Returns a tuple of 4 elements which can be used for further processing with</dt>
<dd><p class="first"><code class="docutils literal notranslate"><span class="pre">pyfolio</span></code></p>
<p class="last">returns, positions, transactions, gross_leverage</p>
</dd>
</dl>
<p>Because the objects are meant to be used as direct input to <code class="docutils literal notranslate"><span class="pre">pyfolio</span></code>
this method makes a local import of <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to convert the internal
<em>backtrader</em> results to <em>pandas DataFrames</em> which is the expected input
by, for example, <code class="docutils literal notranslate"><span class="pre">pyfolio.create_full_tear_sheet</span></code></p>
<p>The method will break if <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is not installed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="logreturnsrolling">
<h2>LogReturnsRolling<a class="headerlink" href="#logreturnsrolling" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.LogReturnsRolling">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">LogReturnsRolling</code><a class="headerlink" href="#backtrader.analyzers.LogReturnsRolling" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates rolling returns for a given timeframe and
compression</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Reference asset to track instead of the portfolio value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this data must have been added to a <code class="docutils literal notranslate"><span class="pre">cerebro</span></code> instance with
<code class="docutils literal notranslate"><span class="pre">addata</span></code>, <code class="docutils literal notranslate"><span class="pre">resampledata</span></code> or <code class="docutils literal notranslate"><span class="pre">replaydata</span></code></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">firstopen</span></code> (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>When tracking the returns of a <code class="docutils literal notranslate"><span class="pre">data</span></code> the following is done when
crossing a timeframe boundary, for example <code class="docutils literal notranslate"><span class="pre">Years</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li>Last <code class="docutils literal notranslate"><span class="pre">close</span></code> of previous year is used as the reference price to
see the return in the current year</li>
</ul>
</div></blockquote>
<p>The problem is the 1st calculation, because the data has** no
previous** closing price. As such and when this parameter is <code class="docutils literal notranslate"><span class="pre">True</span></code>
the <em>opening</em> price will be used for the 1st calculation.</p>
<p>This requires the data feed to have an <code class="docutils literal notranslate"><span class="pre">open</span></code> price (for <code class="docutils literal notranslate"><span class="pre">close</span></code>
the standard [0] notation will be used without reference to a field
price)</p>
<p>Else the initial close will be used.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="periodstats">
<h2>PeriodStats<a class="headerlink" href="#periodstats" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.PeriodStats">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">PeriodStats</code><a class="headerlink" href="#backtrader.analyzers.PeriodStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates basic statistics for given timeframe</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">Years</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">get_analysis</span></code> returns a dictionary containing the keys:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">average</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">stddev</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">positive</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">negative</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">nochange</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">best</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">worst</span></code></li>
</ul>
</div></blockquote>
<p>If the parameter <code class="docutils literal notranslate"><span class="pre">zeroispos</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, periods with no change
will be counted as positive</p>
</dd></dl>

</div>
<div class="section" id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.Returns">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">Returns</code><a class="headerlink" href="#backtrader.analyzers.Returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Total, Average, Compound and Annualized Returns calculated using a
logarithmic approach</p>
<p>See:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://www.crystalbull.com/sharpe-ratio-better-with-log-returns/">https://www.crystalbull.com/sharpe-ratio-better-with-log-returns/</a></li>
</ul>
</div></blockquote>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">tann</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Number of periods to use for the annualization (normalization) of the</p>
<p>namely:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">days:</span> <span class="pre">252</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">weeks:</span> <span class="pre">52</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">months:</span> <span class="pre">12</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">years:</span> <span class="pre">1</span></code></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
<p>The returned dict the following keys:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">rtot</span></code>: Total compound return</li>
<li><code class="docutils literal notranslate"><span class="pre">ravg</span></code>: Average return for the entire period (timeframe specific)</li>
<li><code class="docutils literal notranslate"><span class="pre">rnorm</span></code>: Annualized/Normalized return</li>
<li><code class="docutils literal notranslate"><span class="pre">rnorm100</span></code>: Annualized/Normalized return expressed in 100%</li>
</ul>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sharperatio">
<h2>SharpeRatio<a class="headerlink" href="#sharperatio" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.SharpeRatio">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">SharpeRatio</code><a class="headerlink" href="#backtrader.analyzers.SharpeRatio" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates the SharpeRatio of a strategy using a risk free
asset which is simply an interest rate</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Sharpe_ratio">https://en.wikipedia.org/wiki/Sharpe_ratio</a></li>
</ul>
</div>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code>: (default: <code class="docutils literal notranslate"><span class="pre">TimeFrame.Years</span></code>)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">riskfreerate</span></code> (default: 0.01 -&gt; 1%)</p>
<p>Expressed in annual terms (see <code class="docutils literal notranslate"><span class="pre">convertrate</span></code> below)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">convertrate</span></code> (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>Convert the <code class="docutils literal notranslate"><span class="pre">riskfreerate</span></code> from annual to monthly, weekly or daily
rate. Sub-day conversions are not supported</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">factor</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the conversion factor for the riskfree rate from <em>annual</em>
to the chosen timeframe will be chosen from a predefined table</p>
<blockquote>
<div><p>Days: 252, Weeks: 52, Months: 12, Years: 1</p>
</div></blockquote>
<p>Else the specified value will be used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">annualize</span></code> (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">convertrate</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <em>SharpeRatio</em> will be delivered in
the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of choice.</p>
<p>In most occasions the SharpeRatio is delivered in annualized form.
Convert the <code class="docutils literal notranslate"><span class="pre">riskfreerate</span></code> from annual to monthly, weekly or daily
rate. Sub-day conversions are not supported</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">stddev_sample</span></code> (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>If this is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the <em>standard deviation</em> will be calculated
decreasing the denominator in the mean by <code class="docutils literal notranslate"><span class="pre">1</span></code>. This is used when
calculating the <em>standard deviation</em> if it’s considered that not all
samples are used for the calculation. This is known as the <em>Bessels’
correction</em></p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">daysfactor</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Old naming for <code class="docutils literal notranslate"><span class="pre">factor</span></code>. If set to anything else than <code class="docutils literal notranslate"><span class="pre">None</span></code> and
the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> is <code class="docutils literal notranslate"><span class="pre">TimeFrame.Days</span></code> it will be assumed this is old
code and the value will be used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">legacyannual</span></code> (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">AnnualReturn</span></code> return analyzer, which as the name implies
only works on years</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with key “sharperatio” holding the ratio</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sharperatio-a">
<h2>SharpeRatio_A<a class="headerlink" href="#sharperatio-a" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.SharpeRatio_A">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">SharpeRatio_A</code><a class="headerlink" href="#backtrader.analyzers.SharpeRatio_A" title="Permalink to this definition">¶</a></dt>
<dd><p>Extension of the SharpeRatio which returns the Sharpe Ratio directly in
annualized form</p>
<p>The following param has been changed from <code class="docutils literal notranslate"><span class="pre">SharpeRatio</span></code></p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">annualize</span></code> (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="sqn">
<h2>SQN<a class="headerlink" href="#sqn" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.SQN">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">SQN</code><a class="headerlink" href="#backtrader.analyzers.SQN" title="Permalink to this definition">¶</a></dt>
<dd><p>SQN or SystemQualityNumber. Defined by Van K. Tharp to categorize trading
systems.</p>
<blockquote>
<div><ul class="simple">
<li>1.6 - 1.9 Below average</li>
<li>2.0 - 2.4 Average</li>
<li>2.5 - 2.9 Good</li>
<li>3.0 - 5.0 Excellent</li>
<li>5.1 - 6.9 Superb</li>
<li>7.0 -     Holy Grail?</li>
</ul>
</div></blockquote>
<p>The formula:</p>
<blockquote>
<div><ul class="simple">
<li>SquareRoot(NumberTrades) * Average(TradesProfit) / StdDev(TradesProfit)</li>
</ul>
</div></blockquote>
<p>The sqn value should be deemed reliable when the number of trades &gt;= 30</p>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with keys “sqn” and “trades” (number of
considered trades)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="timereturn">
<h2>TimeReturn<a class="headerlink" href="#timereturn" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.TimeReturn">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">TimeReturn</code><a class="headerlink" href="#backtrader.analyzers.TimeReturn" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer calculates the Returns by looking at the beginning
and end of the timeframe</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> the <code class="docutils literal notranslate"><span class="pre">timeframe</span></code> of the 1st data in the system will be
used</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">data</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Reference asset to track instead of the portfolio value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this data must have been added to a <code class="docutils literal notranslate"><span class="pre">cerebro</span></code> instance with
<code class="docutils literal notranslate"><span class="pre">addata</span></code>, <code class="docutils literal notranslate"><span class="pre">resampledata</span></code> or <code class="docutils literal notranslate"><span class="pre">replaydata</span></code></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">firstopen</span></code> (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>When tracking the returns of a <code class="docutils literal notranslate"><span class="pre">data</span></code> the following is done when
crossing a timeframe boundary, for example <code class="docutils literal notranslate"><span class="pre">Years</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li>Last <code class="docutils literal notranslate"><span class="pre">close</span></code> of previous year is used as the reference price to
see the return in the current year</li>
</ul>
</div></blockquote>
<p>The problem is the 1st calculation, because the data has** no
previous** closing price. As such and when this parameter is <code class="docutils literal notranslate"><span class="pre">True</span></code>
the <em>opening</em> price will be used for the 1st calculation.</p>
<p>This requires the data feed to have an <code class="docutils literal notranslate"><span class="pre">open</span></code> price (for <code class="docutils literal notranslate"><span class="pre">close</span></code>
the standard [0] notation will be used without reference to a field
price)</p>
<p>Else the initial close will be used.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tradeanalyzer">
<h2>TradeAnalyzer<a class="headerlink" href="#tradeanalyzer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.TradeAnalyzer">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">TradeAnalyzer</code><a class="headerlink" href="#backtrader.analyzers.TradeAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides statistics on closed trades (keeps also the count of open ones)</p>
<blockquote>
<div><ul>
<li><p class="first">Total Open/Closed Trades</p>
</li>
<li><p class="first">Streak Won/Lost Current/Longest</p>
</li>
<li><p class="first">ProfitAndLoss Total/Average</p>
</li>
<li><p class="first">Won/Lost Count/ Total PNL/ Average PNL / Max PNL</p>
</li>
<li><p class="first">Long/Short Count/ Total PNL / Average PNL / Max PNL</p>
<blockquote>
<div><ul class="simple">
<li>Won/Lost Count/ Total PNL/ Average PNL / Max PNL</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Length (bars in the market)</p>
<ul class="simple">
<li>Total/Average/Max/Min</li>
<li>Won/Lost Total/Average/Max/Min</li>
<li>Long/Short Total/Average/Max/Min<ul>
<li>Won/Lost Total/Average/Max/Min</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The analyzer uses an “auto”dict for the fields, which means that if no
trades are executed, no statistics will be generated.</p>
<p>In that case there will be a single field/subfield in the dictionary
returned by <code class="docutils literal notranslate"><span class="pre">get_analysis</span></code>, namely:</p>
<blockquote class="last">
<div><ul class="simple">
<li>dictname[‘total’][‘total’] which will have a value of 0 (the field is
also reachable with dot notation dictname.total.total</li>
</ul>
</div></blockquote>
</div>
</dd></dl>

</div>
<div class="section" id="transactions">
<h2>Transactions<a class="headerlink" href="#transactions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.Transactions">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">Transactions</code><a class="headerlink" href="#backtrader.analyzers.Transactions" title="Permalink to this definition">¶</a></dt>
<dd><p>This analyzer reports the transactions occurred with each an every data in
the system</p>
<p>It looks at the order execution bits to create a <code class="docutils literal notranslate"><span class="pre">Position</span></code> starting from
0 during each <code class="docutils literal notranslate"><span class="pre">next</span></code> cycle.</p>
<p>The result is used during next to record the transactions</p>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first">headers (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>Add an initial key to the dictionary holding the results with the names
of the datas</p>
<p>This analyzer was modeled to facilitate the integration with
<code class="docutils literal notranslate"><span class="pre">pyfolio</span></code> and the header names are taken from the samples used for
it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;sid&#39;</span><span class="p">,</span> <span class="s1">&#39;symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="vwr">
<h2>VWR<a class="headerlink" href="#vwr" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="backtrader.analyzers.VWR">
<em class="property">class </em><code class="descclassname">backtrader.analyzers.</code><code class="descname">VWR</code><a class="headerlink" href="#backtrader.analyzers.VWR" title="Permalink to this definition">¶</a></dt>
<dd><p>Variability-Weighted Return: Better SharpeRatio with Log Returns</p>
<p>Alias:</p>
<blockquote>
<div><ul class="simple">
<li>VariabilityWeightedReturn</li>
</ul>
</div></blockquote>
<p>See:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://www.crystalbull.com/sharpe-ratio-better-with-log-returns/">https://www.crystalbull.com/sharpe-ratio-better-with-log-returns/</a></li>
</ul>
</div></blockquote>
<p>Params:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timeframe</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)
If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the complete return over the entire backtested period
will be reported</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TimeFrame.NoTimeFrame</span></code> to consider the entire dataset with no
time constraints</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">compression</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Only used for sub-day timeframes to for example work on an hourly
timeframe by specifying “TimeFrame.Minutes” and 60 as compression</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> then the compression of the 1st data of the system will be
used</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">tann</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>Number of periods to use for the annualization (normalization) of the
average returns. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, then standard <code class="docutils literal notranslate"><span class="pre">t</span></code> values will be used,
namely:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">days:</span> <span class="pre">252</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">weeks:</span> <span class="pre">52</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">months:</span> <span class="pre">12</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">years:</span> <span class="pre">1</span></code></li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">tau</span></code> (default: <code class="docutils literal notranslate"><span class="pre">2.0</span></code>)</p>
<p>factor for the calculation (see the literature)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">sdev_max</span></code> (default: <code class="docutils literal notranslate"><span class="pre">0.20</span></code>)</p>
<p>max standard deviation (see the literature)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">fund</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> the actual mode of the broker (fundmode - True/False) will
be autodetected to decide if the returns are based on the total net
asset value or on the fund value. See <code class="docutils literal notranslate"><span class="pre">set_fundmode</span></code> in the broker
documentation</p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> for a specific behavior</p>
</li>
</ul>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">- get_analysis</code></dt>
<dd><p>Returns a dictionary with returns as values and the datetime points for
each return as keys</p>
<p>The returned dict contains the following keys:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">vwr</span></code>: Variability-Weighted Return</li>
</ul>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, 2016, 2017, 2018 Daniel Rodriguez.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>